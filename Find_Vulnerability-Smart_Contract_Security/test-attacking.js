
async function main() {
    const targetAbi = require('./contractsData/Target.json');
    const targetAddress = require('./contractsData/Target-address.json');
    const attackerAbi = require('./contractsData/Attacker.json');
    const attackerAddress = require('./contractsData/Attacker-address.json');
    const [sign] = await ethers.getSigners();
    const myAddress = '0x2eE648bb7882d236c2aAce994Ab6143B3bc06744';
  
    console.log("Deploying contracts with the account:", sign.address);
    console.log("Account balance:", (await sign.getBalance()).toString());
    
    const targetContract    = new ethers.Contract(targetAddress.address, targetAbi.abi, sign);
    const attackerContract  = new ethers.Contract(attackerAddress.address, attackerAbi.abi, sign);

    //await attackerContract.set_addr(sign.address);
    const result = await attackerContract.atk();
    console.log("LOGGING THE CONTRACT VALUE: ", result);
    const targetHacked = await targetContract.winners(0);
    console.log("CONTRACT HACKED: ", targetHacked);
  }
  
  main()
    .then(() => process.exit(0))
    .catch(error => {
      console.error(error);
      process.exit(1);
    });